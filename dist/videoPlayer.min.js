this.SliceMeNice=this.SliceMeNice||{},this.SliceMeNice.VideoPlayer=function(t){"use strict";var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function n(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var e,r=function(){function e(){this.eventListeners={}}return e.prototype.on=function(e,t,n){void 0===n&&(n=!1);var i=this.eventListeners[e]||[];return i.push({callback:t,once:n}),this.eventListeners[e]=i,this},e.prototype.once=function(e,t){return this.on(e,t,!0)},e.prototype.off=function(e,t){if(e)if(t)for(var n=this.eventListeners[e]||[],i=n.length-1;0<=i;i--)n[i].callback===t&&n.splice(i,1);else this.eventListeners[e]=[];else this.eventListeners={};return this},e.prototype.trigger=function(e){for(var n=this,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];var r=(this.eventListeners[e]||[]).concat(this.eventListeners["*"]||[]),a=[];r.forEach(function(e,t){e.callback?e.callback.apply(n,i):e.once=!0,e.once&&a.push(t)});for(var o=a.length-1;0<=o;o--)r.splice(a[o],1);return this},e}();(e=t.PlaybackEvents||(t.PlaybackEvents={})).Abort="abort",e.CanPlay="canplay",e.CanPlayThrough="canplaythrough",e.DurationChange="durationchange",e.Emptied="emptied",e.Ended="ended",e.Error="error",e.LoadedData="loadeddata",e.LoadedMetadata="loadedmetadata",e.LoadStart="loadstart",e.Pause="pause",e.Play="play",e.Playing="playing",e.Progress="progress",e.RateChange="ratechange",e.Seeked="seeked",e.Seeking="seeking",e.Stalled="stalled",e.Suspend="suspend",e.TimeUpdate="timeupdate",e.VolumeChange="volumechange",e.Waiting="waiting";var a=function(i){function e(e,t){var n=i.call(this)||this;return n.videoElement=e,n.playerOptions=t,n}return n(e,i),e.canPlay=function(e,t){return!1},e.prototype.attach=function(){return this.videoElement.addEventListener(t.PlaybackEvents.Abort,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.CanPlay,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.CanPlayThrough,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.DurationChange,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.Emptied,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.Ended,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.Error,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.LoadedData,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.LoadedMetadata,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.LoadStart,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.Pause,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.Play,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.Playing,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.Progress,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.RateChange,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.Seeked,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.Seeking,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.Stalled,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.Suspend,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.TimeUpdate,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.VolumeChange,this,!1),this.videoElement.addEventListener(t.PlaybackEvents.Waiting,this,!1),Promise.resolve()},e.prototype.detach=function(){return this.videoElement.removeEventListener(t.PlaybackEvents.Abort,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.CanPlay,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.CanPlayThrough,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.DurationChange,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.Emptied,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.Ended,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.Error,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.LoadedData,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.LoadedMetadata,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.LoadStart,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.Pause,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.Play,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.Playing,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.Progress,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.RateChange,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.Seeked,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.Seeking,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.Stalled,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.Suspend,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.TimeUpdate,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.VolumeChange,this,!1),this.videoElement.removeEventListener(t.PlaybackEvents.Waiting,this,!1),this.videoElement.pause(),this.videoElement.src="",this.videoElement.load(),Promise.resolve()},e.prototype.handleEvent=function(e){this.trigger(e.type,e)},e.prototype.pause=function(){this.videoElement.pause()},e.prototype.play=function(){this.videoElement.play()},e.prototype.setSource=function(e){var t=this;return this.attach().then(function(){t.videoElement.src=e})},e}(r);function o(e,t){var n=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1];return n&&t[n.toLowerCase()]||[]}var s={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map(function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'}),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};s.ogv=s.ogg,s["3gp"]=s["3gpp"];var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.canPlay=function(e,t){var n=o(e,s),i=document.createElement("video");return!!n.filter(function(e){return!!i.canPlayType(e).replace(/no/,"")})[0]},t}(a),c={assetBaseUrls:{player:""},autoPlay:!1,playbacks:[l],sources:[]};function d(e){if(!e||"[object Object]"!==e.toString())return!1;var t=Object.getPrototypeOf(e);if(!t)return!0;var n=t.hasOwnProperty("constructor")&&t.constructor;return"function"==typeof n&&n.toString()===Object.toString()}function v(a){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.forEach(function(e){if(null!=e)for(var t in e){var n=a[t],i=e[t];if(a!==i)if(i&&d(i)){var r=n&&d(n)?n:{};a[t]=v(r,i)}else void 0!==i&&(a[t]=i)}}),a}var u=function(){function e(){}return Object.defineProperty(e,"isEdge",{get:function(){return/edge/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isChrome",{get:function(){return/chrome|CriOS/i.test(navigator.userAgent)&&!e.isEdge},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isSafari",{get:function(){return/safari/i.test(navigator.userAgent)&&!e.isChrome&&!e.isEdge},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isFirefox",{get:function(){return/firefox/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isLegacyIE",{get:function(){return!!window.ActiveXObject},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE11",{get:function(){return/trident.*rv:11/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isChromecast",{get:function(){return e.isChrome&&/CrKey/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMobile",{get:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isiOS",{get:function(){return/iPad|iPhone|iPod/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return/Android/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindowsPhone",{get:function(){return/Windows Phone/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWin8App",{get:function(){return/MSAppHost/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"usesSafariEngine",{get:function(){return e.isSafari||e.isiOS},enumerable:!0,configurable:!0}),e}(),h=function(){function e(){}return e.loadBundle=function(e,t){if(!this.bundles.hasOwnProperty(e))throw new Error("Bundle is not defined");return this.bundleResultCache[e]||(this.bundleResultCache[e]=this.loadFiles(this.bundles[e],t)),this.bundleResultCache[e]},e.loadFile=function(r,a){return new Promise(function(t,n){var e;a=v({},{async:!0,beforeLoad:function(){}},a||{});var i=r.replace(/^(css|img)!/,"");/(^css!|\.css$)/.test(r)?((e=document.createElement("link")).rel="stylesheet",e.href=i):/(^img!|\.(png|gif|jpg|svg)$)/.test(r)?(e=document.createElement("img")).src=i:((e=document.createElement("script")).src=r,e.async=a.async),e.addEventListener("error",function(e){n(new Error("Failed to load asset: "+i))},{once:!0}),e.addEventListener("beforeload",function(e){e.defaultPrevented&&n(new Error("Failed to load asset: "+i+" (BLOCKED)"))},{once:!0}),e.addEventListener("load",function(e){t()},{once:!0}),!1!==a.beforeLoad(r,e)&&document.head.appendChild(e)})},e.loadFiles=function(e,t){var n=this;return Promise.all(e.map(function(e){return n.loadFile(e,t)}))},e.registerBundle=function(e,t){if(this.bundles.hasOwnProperty(e))throw new Error("Bundle is already defined");this.bundles[e]=t},e.bundles={},e.bundleResultCache={},e}(),E=function(i){function e(e,t){var n=i.call(this)||this;if(n.videoElement=e,n.handlePlaybackEvent=n.handlePlaybackEvent.bind(n),!e||"VIDEO"!==e.nodeName)throw new Error("Parameter videoElement should be of type HTMLVideoElement");return n.options=v({},c,t||{}),n.options.sources.length&&n.setPlayerSource().then(function(){n.options.autoPlay&&n.play()}).catch(function(e){console.error(e)}),n}return n(e,i),e.prototype.consent=function(){this.videoElement&&this.videoElement.load()},e.prototype.load=function(e,t){var n=this;return void 0===t&&(t=!1),this.options.sources=e,this.options.sources.length?this.setPlayerSource().then(function(){t&&n.play()}).catch(function(e){console.error(e)}):Promise.reject("No video source was provided.")},e.prototype.findSuitablePlaybackForSource=function(t){var n=this;return this.options.playbacks.find(function(e){return e.canPlay(t,n.options)})},e.prototype.handlePlaybackEvent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.trigger.apply(this,[e.type,e].concat(t))},e.prototype.setPlayerSource=function(){var n=this,i=this;this.resetPlayback();var e=i.options.sources.find(function(e){var t=n.findSuitablePlaybackForSource(e);return t&&(i.playback=new t(i.videoElement,i.options),i.playback.on("*",n.handlePlaybackEvent)),!!i.playback});if(e&&i.playback)return i.playback.setSource(e);if(!i.playback)throw new Error("No suitable playback found.");return Promise.resolve()},e.prototype.pause=function(){this.playback&&this.playback.pause()},e.prototype.play=function(){this.playback&&this.playback.play()},e.prototype.resetPlayback=function(){this.playback&&(this.playback.off("*",this.handlePlaybackEvent),this.playback.detach(),this.playback=void 0)},e.prototype.destroy=function(){this.resetPlayback()},e}(r);return(t.MimeTypeUtilities||(t.MimeTypeUtilities={})).mimeTypesForUrl=o,(t.OptionUtilities||(t.OptionUtilities={})).extendOptions=v,(t.TypeUtilities||(t.TypeUtilities={})).isPlainObject=d,t.Player=E,t.Browser=u,t.EventEmitter=r,t.Playback=a,t.defaultPlayerOptions=c,t.HTML5_VIDEO_MIMETYPES=s,t.HTML5VideoPlayback=l,t.AssetService=h,t}({});
